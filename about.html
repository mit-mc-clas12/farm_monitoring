<!DOCTYPE HTML>
<html>
	<head>
		<title>CLAS12 Monte-Carlo Job Submission Portal</title>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
		<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css"/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway"/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
		<link rel="stylesheet" href="main.css"/>
	</head>
	
	<body>
		<header class="w3-panel w3-container" id="myHeader">
			<ul id="nav">
				<li><a href="index.php">     Home</a></li>
				<li><a href="about.html">    About</a></li>
				<li><a href="disk.php">      Disk Usage</a></li>
				<li><a href="osgStats.html"> OSG Stats</a></li>
			</ul>

			<div class="w3-center">
				<h1 id="title" class="w3-xlarge w3-opacity"></h1>
				<h2 class="w3-xlarge" style="text-align:right">Logged in as <img width = "160" src="username.php"/></h2>
				<br/><br/>
			</div>
		</header>
		<br/><br/>

		<div class="w3-row-padding w3-rest" id="contact">

			<h1> FAQ </h1>
			<p style="margin-left: 40px">
			As soon as you click the "Submit" button, this happens:<br/>
			<li style="margin-left: 60px"> <b>1</b>: Your submission is logged in our mysql db </li>
			<li style="margin-left: 60px"> <b>2</b>: Within a few minutes your jobs will be submitted to OSG and visible in this portal.
				The output directory is synced every hour on /volatile/osg/clas12 (see "Output" below) once the job is completed</li>
			<li style="margin-left: 60px"> <b>3</b>: When the jobs are completed, the job will be delisted from the portal. </li>

			<br/>

			<li style="margin-left: 60px"> <b>Q1</b>: my submission doesn't appear on the portal</li>

			<ul>
				<li style="margin-left: 50px"> A1: Check the content of the file CondorSubmissionError.txt in the output dir (it will appear after the hourly sync). If it has content, the job failed to submit. The most common error here is either a non-existing LUND directory or the LUND web address did not end with "/". If the error is not clear, please report to <a href="mailto:ungaro@jlab.org">Maurizio</a>.</li>
				<li style="margin-left: 50px"> A2: Your jobs (or a close previous submission) have hundreds of LUND files. In this case be patient, it may take up to a couple of hours for the files to be copied in /volatile and submitted to OSG. This process is serial so a LUND submission with many files will block subsequent submissions until all files are processed. </li>
			</ul>

			<li style="margin-left: 60px"> <b>Q2</b>: There was no output / not all jobs made it to the output</li>
			<ul>
				<li style="margin-left: 50px"> A1: Syncing the output back to /volatile takes a while.</li>
				<li style="margin-left: 50px"> A2: There was an actual error. Please report to <a href="mailto:ungaro@jlab.org">Maurizio</a>. Most likely causes are: </li>
				<ul>
					<li style="margin-left: 50px"> E1: xrootd server glitch: background merge files not found</li>
					<li style="margin-left: 50px"> E2: CVMFS error on the node.  </li>
				</ul>
			</ul>

			</p>

			<br/>

			<h1>The Sweet Spot </h1>
			<p style="margin-left: 40px">
			10,000 events is the "sweet spot" for each job, corresponding to the ideal CPU time on the OSG of 2-4 hours.<br/>
			The events in the LUND files are not counted beforehand so each file should be limited to 10,000 events.<br/>
			</p>
			<br/>

			<h1> Configurations </h1>
			<p style="margin-left: 40px">
			The available CLAS12 configurations correspond to the approved experiments. As of 8/24/2020:<br/>
			<li style="margin-left: 60px"> <b>rga_spring2018</b>: RGA spring 2018 configuration  </li>
			<li style="margin-left: 60px"> <b>rga_fall2018</b>:   RGA fall 2018 configuration</li>
			<li style="margin-left: 60px"> <b>rgk_fall2018_FTOn</b>:   RGA fall 2018 configuration with FT On</li>
			<li style="margin-left: 60px"> <b>rgk_fall2018_FTOff</b>:  RGK fall 2018 configuration with FT Off</li>
			<li style="margin-left: 60px"> <b>rgb_spring2019</b>: RGB spring 2019  </li>
			<li style="margin-left: 60px"> <b>rga_spring2019</b>: RGA spring 2019 </li>
			</p>
			<br/>

			<h1> Background Merging </h1>
			<p style="margin-left: 40px">
			The user choice of experiment and magnetic fieds enable the possibility of backgrond merging
			in the dropdown menu.<br/>
			If selected, a random file among the available pool (files of 10k events each) is merged
			to the simulated events before reconstruction.
			</p>
			<br/>

			<h1> Output </h1>
			<p style="margin-left: 40px">
			The output is synced hourly on
			</p>
			<pre style="font-size: 20px">	/volatile/clas12/osg2/"username"/job_ID </pre>
			<p style="margin-left: 40px">
			where "<b>username</b>" is your jlab account name and <b>ID</b> is the submission ID.<br/>
			Individual "subjobs" are organized in subdirs named <b>simu_SJID</b>, where SJID is the subjob id.
			If you submit 500 jobs, SJID will run from 0 to 499.<br>
			</p>
			<br/>


			<h1> Priority </h1>
			<p style="margin-left: 40px">
			We have in place a priority system to ensure that the resources are shared among all submissions.<br/>
			Analysis groups can submit the <a href="Priority Permission Increase Form.pdf">  Priority Permission Increase Form </a>
			to increase an account priority.<br/>
			<p style="margin-left: 40px">
			<br/>


			<h1> Versions </h1>

			<p style="margin-left: 40px">
			The software versions of simulation and reconstruction are:
			</p>

			<ul>
				<li style="margin-left: 50px">  <a href="https://github.com/gemc/clas12Tags">Gemc</a> and
					<a href="https://github.com/gemc/clas12Tags">clas12 geometry</a>:  4.4.1 </li>
				<li style="margin-left: 50px"> <a href="https://clasweb.jlab.org/wiki/index.php/CLAS12_Software_Center#tab=Reconstruction">Coatjava</a>:
					<ul>
						<li style="margin-left: 50px"> 6.5.9 (rgb) </li>
						<li style="margin-left: 50px"> 6.5.6.1 (rga and rgk) </li>
					</ul>
				</li>
				<br/>
			</ul>

			For informations about upcoming or older releases of the docker/singularity images visit <a href="https://hub.docker.com/repository/docker/jeffersonlab/clas12software">jeffersonlab/clas12software</a> hub

			<h1> Container for Interactive Use </h1>

			<p style="margin-left: 40px">
			The docker container used on OSG is also available for interactive use, see
			the <a href="https://clasweb.jlab.org/clas12/clas12SoftwarePage/html/index.html"> docker distribution </a> page
			for details.
			</p>

			<br/>
			<br/>
			<hr>

			<center>

				<table style=" width:50%; text-align:center; border: 0px; border-collapse: collapse;">
					<tr >
						<th style="border-collapse:collapse; border: 0px;"></th>
						<th style="border-collapse:collapse; border: 0px;"> <h2> Contacts and Support </h2>
						</th>
						<th style="border-collapse:collapse; border: 0px;"></th>
					</tr >
					<tr >
						<th style="border-collapse:collapse; border: 0px;"> <h3> JLab </h3>  <a href="mailto:ungaro@jlab.org">Maurizo Ungaro</a>
						</th>
						<th style="border-collapse:collapse; border: 0px;"> <h3> MIT </h3>
							<a href="mailto:robertej@mit.edu">Bobby Johnston</a><br/>
							<a href="mailto:sangbaek@mit.edu">Sangbaek Lee</a><br/>
							<a href="mailto:moranp@mit.edu">Patrick Moran</a>
						</th>
						<th style="border-collapse:collapse; border: 0px;"> <h3> Additional Resources </h3>
							<a href="https://clas12.discourse.group/c/simulation/9">Discourse</a><br/>
							<a href="https://clasweb.jlab.org/clas12/clas12SoftwarePage/html/index.html">Docker  Distribution</a><br/>
							<a href="https://github.com/JeffersonLab/clas12-mcgen">clas12-mcgen Repo</a><br/>
						</th>
					</tr>

				</table>
			</center>


		</div>

	</body>

	<script src="main.js"></script>		<!-- Don't move this line to the top! It causes an error at Safari -->

</html>
