<!DOCTYPE HTML>
<html>
<head>
	<title>CLAS12 Monte-Carlo Job Submission Portal</title>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
	<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css"/>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="main.css"/>
</head>

<body>
<header class="w3-panel w3-container" id="myHeader">
	<ul id="nav">
		<li><a href="index.php"> Home</a></li>
		<li><a href="about.html"><h3><b>About</b></h3></a></li>
		<li><a href="osgStats.html"> OSG Stats</a></li>
		<li><a href="monitor.html"> Monitors</a></li>
	</ul>

	<div class="w3-center">
		<h1 id="title" class="w3-xlarge w3-opacity"></h1>
		<h2 class="w3-xlarge" style="text-align:right">Logged in as <img width="160" src="username.php"/></h2>
		<br/><br/>
	</div>
</header>
<br/><br/>

<div class="w3-row-padding w3-rest" id="contact">

	<h1>Submitting Jobs</h1>
	<p style="margin-left: 40px">
		When you click the "Submit" button:<br/>
	<li style="margin-left: 60px"><b>1</b>: Your submission is logged in our mysql db</li>
	<li style="margin-left: 60px"><b>2</b>: Within a few minutes your jobs will be submitted to OSG and visible in this
		portal.
	</li>
	<li style="margin-left: 60px"><b>3</b>: When the jobs are completed, the job will be delisted from the portal.</li>
	<li style="margin-left: 60px"><b>4</b>: The output directory is synced every hour on /volatile/clas12/osg2</li>
	</p>
	<p style="margin-left: 40px">
		The number of events per sub-job are limited to 10,000 corresponding to a
		time on the OSG between 4-10 hours depending on the node CPU<br/>
	</p>
	<p style="margin-left: 40px">
		HOWTOS:<br/>
	<li style="margin-left: 60px"> Submit Jobs to OSG:
		<a href="https://clasweb.jlab.org/clas12/clas12SoftwarePage/html/submitToOSG.html"> Software Distribution </a>
		|
		<a href="https://clasweb.jlab.org/wiki/index.php/Submit_Jobs_to_OSG"> CLAS12 Software Center </a></li>

	<br/>


	<h1> Experiment Configurations and target position</h1>
	<p style="margin-left: 40px">
		The available CLAS12 configurations correspond to the approved experiments. As of 8/24/2020:<br/>
	<li style="margin-left: 60px"><b>rga_spring2018</b>: RGA spring 2018 configuration, target at -1.94cm</li>
	<li style="margin-left: 60px"><b>rga_fall2018</b>: RGA fall 2018 configuration, target at -3.0cm</li>
	<li style="margin-left: 60px"><b>rgk_fall2018_FTOn</b>: RGA fall 2018 configuration with FT On, target at -3.0cm
	</li>
	<li style="margin-left: 60px"><b>rgk_fall2018_FTOff</b>: RGK fall 2018 configuration with FT Off, target at -3.0cm
	</li>
	<li style="margin-left: 60px"><b>rgb_spring2019</b>: RGB spring 2019, target at -3.0cm</li>
	<li style="margin-left: 60px"><b>rga_spring2019</b>: RGA spring 2019, target at -3.0cm</li>
	<li style="margin-left: 60px"><b>rgb_fall2019</b>: RGB fall 2019, target at -3.0cm</li>
	</p>
	<br/>
	<p style="margin-left: 40px">
		While the gcards takes care of the target volumes positions (for example, in rga_spring2019 it is moved upstream
		by 3cm),
		it is up to the generators and the LUND files to place the event in the correct location. <br/>
	</p>

	<br/>


	<h1> Background Merging </h1>
	<p style="margin-left: 40px">
		The user choice of experiment and magnetic fieds enable the possibility of backgrond merging
		in the dropdown menu.<br/>
		If selected, a random file among the available pool (files of 10k events each) is merged
		to the simulated events before reconstruction.
	</p>
	<br/>

	<h1> Output </h1>
	<p style="margin-left: 40px">
		The output is synced hourly on
	</p>
	<pre style="font-size: 20px">	/volatile/clas12/osg2/"username"/job_ID </pre>
	<p style="margin-left: 40px">
		where "<b>username</b>" is your jlab account name and <b>ID</b> is the submission ID.<br/>
		Individual "subjobs" are organized in subdirs named <b>simu_SJID</b>, where SJID is the subjob id.
		If you submit 500 jobs, SJID will run from 0 to 499.<br>
	</p>
	<br/>


	<h1> Priority </h1>
	<p style="margin-left: 40px">
		A priority system is in place to ensure that the resources are shared among all submissions.<br/>
		Analysis groups can submit the <a href="Priority Permission Increase Form.pdf"> Priority Permission Increase
		Form </a>
		to increase an account priority.<br/>
	<p style="margin-left: 40px">
		<br/>


	<h1> Versions </h1>

	<p style="margin-left: 40px">
		The software versions of the CLAS12 generators, gemc simulation and coatjava reconstruction are:
	</p>

	<ul>
		<li style="margin-left: 50px"><a href="https://github.com/JeffersonLab/clas12-mcgen">clas12-mcgen</a>: 2.22</li>


		<li style="margin-left: 50px">
			<a href="https://github.com/gemc/clas12Tags">gemc</a> and
			<a href="https://github.com/JeffersonLab/clas12-offline-software">coatjava</a> pairings:<br/><br/>
		</li>

		<ul>
			<li style="margin-left: 50px"> gemc 4.4.2 / coatjava 6.5.9 (rgb pass1)</li>
			<li style="margin-left: 50px"> gemc 4.4.2 / coatjava 6.5.6.1 (rga and rgk pass1)</li>
			<li style="margin-left: 50px"> gemc 5.1   / coatjava 9.0.1 (pass2)</li>
		</ul>
		<br/>
	</ul>

	<p style="margin-left: 40px">
		For pass1, the yaml file is provided inside the config directory in clas12Tags.<br/><br/>
		For pass2 and onward, the base yaml file is $COATJAVA/config/mc.yaml, with the addition of the configuration->global->variation entry to
		match the vaule of the gcard's DIGITIZATION_VARIATION:<br/>
		<ul>
			<li> rgk_fall2018_FTOff : rga_fall2018_bg </li>
			<li> rgf_spring2020 : rgf_spring2020_mc </li>
			<li> rgk_fall2018_FTOn : rga_fall2018_bg </li>
			<li> rgc : rga_fall2018_bg </li>
			<li> rga_fall2018 : rga_fall2018_bg </li>
			<li> rga_spring2019 : rga_fall2018_bg </li>
			<li> rgb_spring2019 : rga_fall2018_bg </li>
			<li> rga_spring2018 : rga_spring2018_mc </li>
			<li> clas12-default : default </li>
			<li> rgb_fall2019 : rga_fall2018_bg </li>
		</ul>
		See also <a href=" https://clasweb.jlab.org/wiki/index.php/How_to_run_the_full_simulation_train_single-threaded">
		How to run the full simulation train single-threaded</a>.
	</p>

	<br/>
	<br/>
	<h1> Container for Interactive Use </h1>

	<p style="margin-left: 40px">
		The docker container used on OSG is also available for interactive use, see
		the <a href="https://clasweb.jlab.org/clas12/clas12SoftwarePage/html/index.html"> docker distribution </a> page
		for details.
	</p>

	<br/>
	<br/>
	<hr>

	<center>

		<table style=" width:70%; text-align:center; border: 0px; border-collapse: collapse;">
			<tr>
				<th style="border-collapse:collapse; border: 0px;"></th>
				<th style="border-collapse:collapse; border: 0px;"><h2> Contacts and Support </h2>
				</th>
				<th style="border-collapse:collapse; border: 0px;"></th>
			</tr>
			<tr>
				<th style="border-collapse:collapse; border: 0px;"><h3> JLab </h3>
					<a href="mailto:baltzell@jlab.org">Nathan Baltzell</a><br/>
					<a href="mailto:ungaro@jlab.org">Maurizo Ungaro</a>
				</th>
				<th style="border-collapse:collapse; border: 0px;"><h3> MIT </h3>
					<a href="mailto:robertej@mit.edu">Bobby Johnston</a><br/>
					<a href="mailto:sangbaek@mit.edu">Sangbaek Lee</a><br/>
					<a href="mailto:moranp@mit.edu">Patrick Moran</a>
				</th>
				<th style="border-collapse:collapse; border: 0px;"><h3> Additional Resources </h3>
					<a href="https://clas12.discourse.group/c/simulation/9">Discourse</a><br/>
					<a href="https://clasweb.jlab.org/clas12/clas12SoftwarePage/html/index.html">Docker Distribution</a><br/>
					<a href="https://github.com/JeffersonLab/clas12-mcgen">clas12-mcgen Repo</a><br/>
					<a href="https://clasweb.jlab.org/wiki/index.php/CLAS12_Software_Center#tab=Simulation">CLAS12
						Software Center </a><br/>

				</th>
			</tr>

		</table>
		<br/>
		<br/>

	</center>


</div>

</body>

<script src="main.js"></script>        <!-- Don't move this line to the top! It causes an error at Safari -->

</html>
